import{r as m,z as $,v as F,D as y,A as o,b as a,w as i,a4 as D,a5 as G,B as b,I as U,J as d,a6 as _,d as c,K as g,c as w,P as X,W as H,S as J,E as Q,H as v,T as K,f,l as L,o as R,i as q,a0 as T,F as W,$ as O,x as p,C as P}from"./index-Dr-GxmZp.js";const Y={class:"q-pa-md"},Z={class:"row items-center q-mb-md"},h={class:"col-auto"},ee={class:"row q-col-gutter-md"},le={class:"col-12 col-md-4"},ae={class:"row q-col-gutter-sm"},oe={class:"col-12 col-sm-6"},te={class:"col-12 col-sm-6"},re={class:"row justify-end"},se={class:"col-12 col-md-8"},ie={key:0,class:"text-center q-pa-lg"},de={class:"row items-center"},ne={class:"col"},ue={class:"text-h6"},ce={class:"col-auto"},me={class:"text-body1"},ve={key:0,class:"row q-mt-md"},pe={class:"q-mb-md"},be={class:"row q-col-gutter-sm"},ge={class:"col-12 col-sm-6"},fe={class:"col-12 col-sm-6"},Ve={class:"row justify-end q-mt-md"},Ce={__name:"Direcciones",setup(ye){const u=F(),E=m(!0),n=m([]),V=m(!1),C=m(!1),r=m({}),k=m(null),s=m({nombre:"",calle:"",colonia:"",ciudad:"",estado:"",codigoPostal:"",telefono:"",predeterminada:!1});$(async()=>{await z()});const z=async()=>{E.value=!0;try{await new Promise(t=>setTimeout(t,1e3)),n.value=[{id:"1",nombre:"Casa",calle:"Av. Principal 123",colonia:"Centro",ciudad:"Ciudad de México",estado:"CDMX",codigoPostal:"06000",telefono:"5512345678",predeterminada:!0},{id:"2",nombre:"Trabajo",calle:"Calle Reforma 456",colonia:"Polanco",ciudad:"Ciudad de México",estado:"CDMX",codigoPostal:"11550",telefono:"5587654321",predeterminada:!1}]}catch(t){console.error("Error al cargar direcciones:",t),u.notify({message:"Error al cargar tus direcciones",color:"negative",icon:"error"})}finally{E.value=!1}},B=async()=>{try{await new Promise(e=>setTimeout(e,500)),s.value.predeterminada&&n.value.forEach(e=>{e.predeterminada=!1});const t={id:Date.now().toString(),...s.value};n.value.push(t),s.value={nombre:"",calle:"",colonia:"",ciudad:"",estado:"",codigoPostal:"",telefono:"",predeterminada:!1},u.notify({message:"Dirección guardada correctamente",color:"positive",icon:"check_circle"})}catch(t){console.error("Error al guardar dirección:",t),u.notify({message:"Error al guardar la dirección",color:"negative",icon:"error"})}},S=t=>{r.value={...t},V.value=!0},M=async()=>{try{await new Promise(e=>setTimeout(e,500)),r.value.predeterminada&&n.value.forEach(e=>{e.id!==r.value.id&&(e.predeterminada=!1)});const t=n.value.findIndex(e=>e.id===r.value.id);t!==-1&&(n.value[t]={...r.value}),V.value=!1,u.notify({message:"Dirección actualizada correctamente",color:"positive",icon:"check_circle"})}catch(t){console.error("Error al actualizar dirección:",t),u.notify({message:"Error al actualizar la dirección",color:"negative",icon:"error"})}},N=t=>{k.value=t,C.value=!0},A=async()=>{try{await new Promise(t=>setTimeout(t,500)),n.value=n.value.filter(t=>t.id!==k.value.id),u.notify({message:"Dirección eliminada correctamente",color:"positive",icon:"check_circle"})}catch(t){console.error("Error al eliminar dirección:",t),u.notify({message:"Error al eliminar la dirección",color:"negative",icon:"error"})}},j=async t=>{try{await new Promise(e=>setTimeout(e,500)),n.value.forEach(e=>{e.predeterminada=e.id===t.id}),u.notify({message:"Dirección predeterminada actualizada",color:"positive",icon:"check_circle"})}catch(e){console.error("Error al actualizar dirección predeterminada:",e),u.notify({message:"Error al actualizar la dirección predeterminada",color:"negative",icon:"error"})}};return(t,e)=>(p(),y("div",Y,[o("div",Z,[e[18]||(e[18]=o("div",{class:"col"},[o("h4",{class:"q-my-none"},"Mis Direcciones")],-1)),o("div",h,[a(G,null,{default:i(()=>[a(D,{label:"Inicio",to:"/"}),a(D,{label:"Mis direcciones"})]),_:1})])]),o("div",ee,[o("div",le,[a(g,{class:"q-mb-md"},{default:i(()=>[a(b,null,{default:i(()=>e[19]||(e[19]=[o("div",{class:"text-h6"},"Añadir nueva dirección",-1)])),_:1}),a(b,null,{default:i(()=>[a(U,{onSubmit:B,class:"q-gutter-md"},{default:i(()=>[a(d,{modelValue:s.value.nombre,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.nombre=l),label:"Nombre de la dirección (ej. Casa, Trabajo)",outlined:"",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),a(d,{modelValue:s.value.calle,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.calle=l),label:"Calle y número",outlined:"",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),a(d,{modelValue:s.value.colonia,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.colonia=l),label:"Colonia",outlined:"",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),o("div",ae,[o("div",oe,[a(d,{modelValue:s.value.ciudad,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.ciudad=l),label:"Ciudad",outlined:"",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"])]),o("div",te,[a(d,{modelValue:s.value.estado,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.estado=l),label:"Estado",outlined:"",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"])])]),a(d,{modelValue:s.value.codigoPostal,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.codigoPostal=l),label:"Código Postal",outlined:"",type:"number",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),a(d,{modelValue:s.value.telefono,"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.telefono=l),label:"Teléfono de contacto",outlined:"",type:"tel",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),a(_,{modelValue:s.value.predeterminada,"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.predeterminada=l),label:"Establecer como dirección predeterminada"},null,8,["modelValue"]),o("div",re,[a(c,{label:"Guardar dirección",type:"submit",color:"primary"})])]),_:1})]),_:1})]),_:1})]),o("div",se,[E.value?(p(),y("div",ie,[a(X,{color:"primary",size:"3em"}),e[20]||(e[20]=o("div",{class:"q-mt-sm"},"Cargando tus direcciones...",-1))])):n.value.length>0?(p(!0),y(H,{key:1},J(n.value,(l,I)=>(p(),w(g,{key:I,class:"q-mb-md"},{default:i(()=>[a(b,null,{default:i(()=>[o("div",de,[o("div",ne,[o("div",ue,v(l.nombre),1),l.predeterminada?(p(),w(K,{key:0,color:"primary",class:"q-ml-sm"},{default:i(()=>e[21]||(e[21]=[f(" Predeterminada ")])),_:1})):Q("",!0)]),o("div",ce,[a(c,{flat:"",round:"",size:"sm",color:"grey",icon:"edit",onClick:x=>S(l)},null,8,["onClick"]),a(c,{flat:"",round:"",size:"sm",color:"grey",icon:"delete",onClick:x=>N(l)},null,8,["onClick"])])]),a(L,{class:"q-my-md"}),o("div",me,[f(v(l.calle),1),e[22]||(e[22]=o("br",null,null,-1)),f(" "+v(l.colonia),1),e[23]||(e[23]=o("br",null,null,-1)),f(" "+v(l.ciudad)+", "+v(l.estado)+", CP "+v(l.codigoPostal),1),e[24]||(e[24]=o("br",null,null,-1)),f(" Tel: "+v(l.telefono),1)]),l.predeterminada?Q("",!0):(p(),y("div",ve,[a(c,{flat:"",color:"primary",label:"Establecer como predeterminada",onClick:x=>j(l)},null,8,["onClick"])]))]),_:2},1024)]),_:2},1024))),128)):(p(),w(g,{key:2,class:"text-center q-pa-lg"},{default:i(()=>[o("div",pe,[a(R,{name:"location_on",size:"6em",color:"grey-4"})]),e[25]||(e[25]=o("div",{class:"text-h6"},"No tienes direcciones guardadas",-1)),e[26]||(e[26]=o("div",{class:"text-body1 q-mt-sm"},"Añade una dirección para facilitar tus compras.",-1))]),_:1}))])]),a(T,{modelValue:V.value,"onUpdate:modelValue":e[16]||(e[16]=l=>V.value=l),persistent:""},{default:i(()=>[a(g,{style:{"min-width":"350px"}},{default:i(()=>[a(b,null,{default:i(()=>e[27]||(e[27]=[o("div",{class:"text-h6"},"Editar dirección",-1)])),_:1}),a(b,{class:"q-pt-none"},{default:i(()=>[a(U,{onSubmit:M,class:"q-gutter-md"},{default:i(()=>[a(d,{modelValue:r.value.nombre,"onUpdate:modelValue":e[8]||(e[8]=l=>r.value.nombre=l),label:"Nombre de la dirección",outlined:"",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),a(d,{modelValue:r.value.calle,"onUpdate:modelValue":e[9]||(e[9]=l=>r.value.calle=l),label:"Calle y número",outlined:"",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),a(d,{modelValue:r.value.colonia,"onUpdate:modelValue":e[10]||(e[10]=l=>r.value.colonia=l),label:"Colonia",outlined:"",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),o("div",be,[o("div",ge,[a(d,{modelValue:r.value.ciudad,"onUpdate:modelValue":e[11]||(e[11]=l=>r.value.ciudad=l),label:"Ciudad",outlined:"",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"])]),o("div",fe,[a(d,{modelValue:r.value.estado,"onUpdate:modelValue":e[12]||(e[12]=l=>r.value.estado=l),label:"Estado",outlined:"",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"])])]),a(d,{modelValue:r.value.codigoPostal,"onUpdate:modelValue":e[13]||(e[13]=l=>r.value.codigoPostal=l),label:"Código Postal",outlined:"",type:"number",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),a(d,{modelValue:r.value.telefono,"onUpdate:modelValue":e[14]||(e[14]=l=>r.value.telefono=l),label:"Teléfono de contacto",outlined:"",type:"tel",rules:[l=>!!l||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),a(_,{modelValue:r.value.predeterminada,"onUpdate:modelValue":e[15]||(e[15]=l=>r.value.predeterminada=l),label:"Establecer como dirección predeterminada"},null,8,["modelValue"]),o("div",Ve,[q(a(c,{label:"Cancelar",color:"grey",flat:""},null,512),[[P]]),a(c,{label:"Guardar",type:"submit",color:"primary",class:"q-ml-sm"})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:C.value,"onUpdate:modelValue":e[17]||(e[17]=l=>C.value=l)},{default:i(()=>[a(g,null,{default:i(()=>[a(b,{class:"row items-center"},{default:i(()=>[a(W,{icon:"delete",color:"negative","text-color":"white"}),e[28]||(e[28]=o("span",{class:"q-ml-sm"},"¿Estás seguro de que deseas eliminar esta dirección?",-1))]),_:1}),a(O,{align:"right"},{default:i(()=>[q(a(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[P]]),q(a(c,{flat:"",label:"Eliminar",color:"negative",onClick:A},null,512),[[P]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{Ce as default};
